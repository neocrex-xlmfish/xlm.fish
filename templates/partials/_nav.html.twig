{# templates/partials/_nav.html.twig
   Restored v7-style dark mode toggle and active link underline (aria-current).
#}
{% set current_route = app.request.attributes.get('_route')|default('') %}

<header class="backdrop-blur sticky top-0 z-50 border-b theme-header">
  <div class="max-w-6xl mx-auto px-4">
    <div class="flex items-center justify-between h-14">
      <a href="{{ path('home') }}" class="flex items-center gap-2">
        <img src="{{ asset('xlmfish_sm.png') }}" alt="XLMFISH" class="w-6 h-6">
        <span class="font-semibold text-gray-900 theme-link">XLMFISH</span>
      </a>

      <!-- Desktop nav -->
      <nav class="hidden md:flex items-center gap-6">
        <a href="{{ path('lp_index') }}"
           class="text-gray-700 hover:text-primary transition theme-link {% if current_route == 'lp_index' %}underline{% endif %}"
           {% if current_route == 'lp_index' %}aria-current="page"{% endif %}>
          Liquidity
        </a>

        <a href="{{ path('litepaper') }}"
           class="text-gray-700 hover:text-primary transition theme-link {% if current_route == 'litepaper' %}underline{% endif %}"
           {% if current_route == 'litepaper' %}aria-current="page"{% endif %}>
          Litepaper
        </a>
      </nav>

      <!-- Mobile icon nav + Theme toggle -->
      <div class="flex items-center gap-2">
        <nav class="flex md:hidden items-center gap-2 mr-2">
          <a href="{{ path('lp_index') }}" aria-label="Liquidity"
             class="p-2 rounded hover:bg-gray-100 text-gray-700 hover:text-primary theme-link {% if current_route == 'lp_index' %}text-primary{% endif %}">
            <i data-feather="bar-chart-2" class="w-5 h-5"></i>
          </a>

          <a href="{{ path('litepaper') }}" aria-label="Litepaper"
             class="p-2 rounded hover:bg-gray-100 text-gray-700 hover:text-primary theme-link {% if current_route == 'litepaper' %}text-primary{% endif %}">
            <i data-feather="file-text" class="w-5 h-5"></i>
          </a>
        </nav>

        {# Theme toggle button (v7 style) - shown on md+ #}
        <button id="theme-toggle" aria-pressed="false" aria-label="Toggle dark mode" title="Toggle dark mode"
                class="hidden md:inline-flex items-center px-3 py-1 rounded text-sm border">
          <span class="mr-2" id="theme-toggle-icon">ðŸŒ™</span>
          <span class="theme-muted">Dark</span>
        </button>
      </div>
    </div>
  </div>
</header>