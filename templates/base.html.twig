{# Base layout updated to safely include the SEO + social meta include.
   Key changes:
   - Always pass a safe default when including _meta.html.twig to avoid "Variable 'meta' does not exist."
   - Keep blocks for head_extra, stylesheets, extra_meta, etc., so pages can override.
#}
<!doctype html>
<html lang="{{ (app.request.locale|default('en'))|slice(0,2) }}">
  <head>
    <meta charset="utf-8">

    {# Safe include: pass an empty object when `meta` is not provided #}
    {% include '_meta.html.twig' with {'meta': meta|default({})} %}

    {# Stylesheets (override in child templates if needed) #}
    {% block stylesheets %}
      <link rel="stylesheet" href="{{ asset('build/app.css') }}" />
    {% endblock %}

    {% block head_extra %}{% endblock %}
  </head>
  <body>
    <header>
      <nav>
        <a href="{{ path('homepage') }}">XLMFISH</a>
      </nav>
    </header>

    <main id="main" role="main">
      {% block body %}{% endblock %}
    </main>

    <footer>
      <p>&copy; {{ "now"|date("Y") }} XLMFISH</p>
    </footer>

    {% block javascripts %}
      <script src="{{ asset('build/app.js') }}"></script>
    {% endblock %}
  </body>
</html>
